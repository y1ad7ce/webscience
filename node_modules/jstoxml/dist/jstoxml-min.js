!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.jstoxml=n.exports}}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=["_selfCloseTag","_attrs"],o=new RegExp(r.join("|"),"g"),i=function(e){return(Array.isArray(e)?"array":"object"===(void 0===e?"undefined":n(e))&&null!==e&&e._name&&"special-object")||e instanceof Date&&"date"||null===e&&"null"||(void 0===e?"undefined":n(e))},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new RegExp("("+Object.keys(t).join("|")+")","g");return String(e).replace(n,function(e,n){return t[n]||""})},c=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=[];n=Array.isArray(e)?e.map(function(e){var n=Object.keys(e)[0],r=e[n],o=t?a(r,t):r;return n+(!0===o?"":'="'+o+'"')}):Object.keys(e).map(function(n){var r=t?a(e[n],t):e[n];return n+(!0===e[n]?"":'="'+r+'"')});return n}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1]);return 0===e.length?"":" "+e.join(" ")},u=["string","number","boolean"],s=function(e){return u.includes(i(e))},f=[].concat(u,["date","special-object"]),l=e.toXML=function e(){var u,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=d.depth,p=void 0===v?0:v,y=d.indent,b=d._isFirstItem,m=(d._isLastItem,d.attributesFilter),h=d.header,g=d.filter,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.repeat(t)}(y,p),j=i(l),O=(u=l,f.includes(i(u))),k=0===p&&(O||!O&&b),x="";switch(j){case"special-object":var A=l._name,S=l._content;if(null===S){x=A;break}if(Array.isArray(S)&&S.every(s))return S.map(function(n){return e({_name:A,_content:n},t({},d,{depth:p}))}).join("");if(A.match(o))break;var I=e(S,t({},d,{depth:p+1})),F=i(I),L=!I.match("<"),w=""+(y&&!k?"\n":"")+_,T="undefined"===F||""===I,C="boolean"===n(l._selfCloseTag)?T&&l._selfCloseTag:T,E=C?"/":"",M=c(l._attrs,m);x=""+w+("<"+A+M+E+">")+(C?"":""+I+(y&&!L?"\n"+_:"")+"</"+A+">");break;case"object":var P=Object.keys(l);x=P.map(function(n,o){var a=t({},d,{_isFirstItem:0===o,_isLastItem:o+1===P.length}),c={_name:n};if("object"===i(l[n])&&(r.forEach(function(e){var t=l[n][e];void 0!==t&&(c[e]=t,delete l[n][e])}),void 0!==l[n]._content&&Object.keys(l[n]).length>1)){var u=Object.assign({},l[n]);delete u._content,c._content=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return{_name:t,_content:e[t]}})}(u)),[l[n]._content])}return void 0===c._content&&(c._content=l[n]),e(c,a,n)},d).join("");break;case"function":var R=l(d);x=e(R,d);break;case"array":x=l.map(function(n,r){var o=t({},d,{_isFirstItem:0===r,_isLastItem:r+1===l.length});return e(n,o)}).join("");break;default:x=a(l,g)}return""+function(e){var t=e.header,r=e.indent,o=(e.depth,e.isOutputStart);return t&&o?("boolean"===(void 0===t?"undefined":n(t))?'<?xml version="1.0" encoding="UTF-8"?>':t)+(r?"\n":""):""}({header:h,indent:y,depth:p,isOutputStart:k})+x};e.default={toXML:l}});